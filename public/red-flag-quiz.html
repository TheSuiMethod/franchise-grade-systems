<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Franchise Red Flag Quiz | How Risky Is Your Franchise Deal?</title>
    <meta name="description" content="Answer 10 questions about your franchise deal and get an instant risk score. Free. No signup required to start. Built by a franchise survivor.">
    <meta property="og:title" content="How Risky Is Your Franchise Deal? Free Quiz">
    <meta property="og:description" content="10 questions. 3 minutes. Find out if your franchise deal has hidden red flags before you invest $100K+.">
    <link rel="canonical" href="https://www.franchisegradesystems.com/red-flag-quiz">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
    <style>
        :root {
            --forest: #1B4332;
            --forest-mid: #2D6A4F;
            --forest-light: #40916C;
            --sage: #52B788;
            --mint: #95D5B2;
            --pale: #D8F3DC;
            --cream: #F7FBF9;
            --white: #FFFFFF;
            --charcoal: #1A1A2E;
            --slate: #4A4A5A;
            --gray: #6B7280;
            --light-gray: #E5E7EB;
            --danger: #EF4444;
            --warning: #F59E0B;
            --green: #10B981;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'DM Sans', sans-serif; color: var(--charcoal); background: var(--cream); line-height: 1.6; -webkit-font-smoothing: antialiased; }
        h1, h2, h3 { font-family: 'Instrument Serif', serif; font-weight: 400; }

        .nav { background: var(--forest); padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 12px rgba(0,0,0,0.15); }
        .nav-logo { font-family: 'Instrument Serif', serif; color: var(--white); font-size: 1.25rem; text-decoration: none; }
        .nav-logo span { color: var(--sage); }
        .nav-links { display: flex; gap: 24px; align-items: center; }
        .nav-links a { color: var(--mint); text-decoration: none; font-size: 0.9rem; font-weight: 500; }
        .nav-cta { background: var(--sage); color: var(--forest) !important; padding: 8px 20px; border-radius: 8px; font-weight: 700 !important; }

        .hero { background: var(--forest); padding: 50px 24px 40px; text-align: center; }
        .hero h1 { color: var(--white); font-size: 2.2rem; max-width: 650px; margin: 0 auto 12px; line-height: 1.2; }
        .hero p { color: var(--mint); font-size: 1rem; max-width: 520px; margin: 0 auto; }

        .quiz-container { max-width: 640px; margin: -20px auto 0; padding: 0 24px 60px; position: relative; z-index: 10; }

        /* Progress bar */
        .progress-wrap { background: rgba(255,255,255,0.3); border-radius: 20px; height: 8px; margin-bottom: 32px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--sage); border-radius: 20px; transition: width 0.4s ease; width: 0%; }
        .progress-label { text-align: center; font-size: 0.8rem; color: var(--gray); margin-bottom: 8px; }

        /* Question card */
        .question-card { background: var(--white); border-radius: 16px; padding: 36px 32px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); display: none; }
        .question-card.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .question-number { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--sage); margin-bottom: 8px; }
        .question-text { font-family: 'Instrument Serif', serif; font-size: 1.35rem; color: var(--charcoal); margin-bottom: 6px; line-height: 1.3; }
        .question-context { font-size: 0.85rem; color: var(--gray); margin-bottom: 24px; }

        .options { display: flex; flex-direction: column; gap: 10px; }
        .option { padding: 14px 18px; border: 2px solid var(--light-gray); border-radius: 10px; cursor: pointer; font-size: 0.95rem; transition: all 0.2s; display: flex; align-items: center; gap: 12px; }
        .option:hover { border-color: var(--sage); background: var(--pale); }
        .option.selected { border-color: var(--sage); background: var(--pale); font-weight: 600; }
        .option-indicator { width: 20px; height: 20px; border-radius: 50%; border: 2px solid var(--light-gray); flex-shrink: 0; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .option.selected .option-indicator { border-color: var(--sage); background: var(--sage); }
        .option.selected .option-indicator::after { content: ''; width: 8px; height: 8px; background: white; border-radius: 50%; }

        .nav-buttons { display: flex; justify-content: space-between; margin-top: 24px; }
        .btn-back { padding: 10px 20px; border: 2px solid var(--light-gray); border-radius: 8px; background: none; font-family: 'DM Sans', sans-serif; font-size: 0.9rem; cursor: pointer; color: var(--gray); }
        .btn-back:hover { border-color: var(--slate); color: var(--charcoal); }
        .btn-next { padding: 10px 28px; background: var(--sage); color: var(--forest); border: none; border-radius: 8px; font-family: 'DM Sans', sans-serif; font-size: 0.9rem; font-weight: 700; cursor: pointer; opacity: 0.4; pointer-events: none; }
        .btn-next.enabled { opacity: 1; pointer-events: auto; }
        .btn-next:hover:not(:disabled) { background: var(--mint); }

        /* Email gate */
        .email-gate { background: var(--white); border-radius: 16px; padding: 36px 32px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); display: none; text-align: center; }
        .email-gate.active { display: block; animation: fadeIn 0.3s ease; }
        .email-gate h2 { font-size: 1.5rem; margin-bottom: 8px; }
        .email-gate p { color: var(--slate); font-size: 0.95rem; margin-bottom: 20px; }
        .email-gate input { width: 100%; padding: 14px 16px; border: 2px solid var(--light-gray); border-radius: 8px; font-size: 0.95rem; font-family: 'DM Sans', sans-serif; margin-bottom: 12px; }
        .email-gate input:focus { outline: none; border-color: var(--sage); }
        .email-gate button { width: 100%; padding: 14px; background: var(--sage); color: var(--forest); border: none; border-radius: 8px; font-weight: 700; font-size: 1rem; font-family: 'DM Sans', sans-serif; cursor: pointer; }
        .email-gate button:hover { background: var(--mint); }
        .email-gate .skip-link { display: block; margin-top: 12px; font-size: 0.8rem; color: var(--gray); cursor: pointer; text-decoration: underline; }

        /* Results */
        .results-card { background: var(--white); border-radius: 16px; padding: 36px 32px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); display: none; }
        .results-card.active { display: block; animation: fadeIn 0.3s ease; }

        .score-ring { width: 160px; height: 160px; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; flex-direction: column; }
        .score-ring.low { background: linear-gradient(135deg, #D1FAE5, #A7F3D0); border: 4px solid var(--green); }
        .score-ring.medium { background: linear-gradient(135deg, #FEF3C7, #FDE68A); border: 4px solid var(--warning); }
        .score-ring.high { background: linear-gradient(135deg, #FEE2E2, #FECACA); border: 4px solid var(--danger); }
        .score-number { font-family: 'Instrument Serif', serif; font-size: 2.8rem; font-weight: 700; line-height: 1; }
        .score-label { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
        .score-ring.low .score-number { color: #065F46; }
        .score-ring.low .score-label { color: #065F46; }
        .score-ring.medium .score-number { color: #92400E; }
        .score-ring.medium .score-label { color: #92400E; }
        .score-ring.high .score-number { color: #991B1B; }
        .score-ring.high .score-label { color: #991B1B; }

        .results-title { text-align: center; font-size: 1.4rem; margin-bottom: 8px; }
        .results-summary { text-align: center; font-size: 0.95rem; color: var(--slate); margin-bottom: 28px; max-width: 480px; margin-left: auto; margin-right: auto; }

        .flag-results { margin-bottom: 28px; }
        .flag-result-item { padding: 14px 16px; border-radius: 10px; margin-bottom: 8px; font-size: 0.9rem; }
        .flag-result-item.red { background: #FEE2E2; color: #991B1B; }
        .flag-result-item.yellow { background: #FEF3C7; color: #92400E; }
        .flag-result-item.green { background: #D1FAE5; color: #065F46; }
        .flag-result-item strong { display: block; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px; }

        .results-cta { background: var(--forest); padding: 28px 24px; border-radius: 12px; text-align: center; margin-top: 24px; }
        .results-cta h3 { color: var(--white); font-size: 1.2rem; margin-bottom: 8px; }
        .results-cta p { color: var(--mint); font-size: 0.9rem; margin-bottom: 16px; }
        .results-cta a { display: inline-block; background: var(--sage); color: var(--forest); padding: 12px 28px; border-radius: 8px; font-weight: 700; text-decoration: none; margin: 4px; font-size: 0.95rem; }

        .retake { text-align: center; margin-top: 16px; }
        .retake a { color: var(--gray); font-size: 0.85rem; text-decoration: underline; cursor: pointer; }

        footer { background: var(--forest); padding: 40px 24px; text-align: center; }
        footer p { color: var(--mint); font-size: 0.85rem; }
        footer a { color: var(--sage); text-decoration: underline; }
        .footer-logo { font-family: 'Instrument Serif', serif; font-size: 1.3rem; color: var(--white); margin-bottom: 12px; }
        .footer-logo span { color: var(--sage); }
        .footer-links { margin-top: 16px; display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
        .footer-links a { color: var(--mint); font-size: 0.8rem; text-decoration: none; opacity: 0.8; }
        .footer-links a:hover { opacity: 1; }

        .mobile-menu-btn { display: none; background: none; border: none; color: var(--mint); font-size: 1.5rem; cursor: pointer; }
        @media (max-width: 768px) {
            .nav-links { display: none; flex-direction: column; position: absolute; top: 60px; right: 0; background: var(--forest); padding: 20px; border-radius: 0 0 0 12px; box-shadow: -4px 4px 12px rgba(0,0,0,0.2); }
            .nav-links.open { display: flex; }
            .mobile-menu-btn { display: block; }
            .hero h1 { font-size: 1.6rem; }
            .question-card, .email-gate, .results-card { padding: 28px 20px; }
        }
    </style>
<link rel="icon" type="image/png" sizes="32x32" href="/favicon32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/appletouchicon.png">
</head>
<body>
    <nav class="nav">
    <a href="/" class="nav-logo">Franchise<span>-Grade</span> Systems</a>
    <button class="mobile-menu-btn" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
    <div class="nav-links">
        <a href="/tools">Free Tools</a>
        <a href="/red-flags-checklist">Red Flags Checklist</a>
        <a href="/fdd-analyzer" class="nav-cta">Analyze Your FDD</a>
    </div>
</nav>

    <section class="hero">
        <h1>How risky is your franchise deal?</h1>
        <p>10 questions. 3 minutes. Find out if your deal has hidden red flags before you invest.</p>
    </section>

    <div class="quiz-container">
        <div class="progress-label" id="progressLabel">Question 1 of 10</div>
        <div class="progress-wrap"><div class="progress-bar" id="progressBar"></div></div>

        <!-- QUESTIONS -->
        <div class="question-card active" data-q="0">
            <div class="question-number">Question 1 of 10</div>
            <div class="question-text">Does the FDD include Item 19 financial performance data?</div>
            <div class="question-context">Item 19 is optional. Many franchisors skip it entirely.</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>Yes, with revenue AND expense/profit data</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>Yes, but only gross revenue (no expenses)</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>No Item 19 data at all</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>I don't know / haven't checked</div>
            </div>
            <div class="nav-buttons">
                <div></div>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="1">
            <div class="question-number">Question 2 of 10</div>
            <div class="question-text">Are technology or marketing fees capped at a maximum amount?</div>
            <div class="question-context">Look in Item 6 for language like "subject to change" or "at franchisor's discretion."</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>Yes, there's a stated maximum</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>No cap, but increases require notice</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>No cap and franchisor has sole discretion</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>I don't know / haven't checked</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="2">
            <div class="question-number">Question 3 of 10</div>
            <div class="question-text">How many franchise locations have closed, been terminated, or transferred in the last 3 years?</div>
            <div class="question-context">Check Item 20 tables. Add up closures + terminations + transfers, then compare to total units.</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>Less than 10% of total units</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>10-20% of total units</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>More than 20% of total units</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>I don't know / haven't calculated</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="3">
            <div class="question-number">Question 4 of 10</div>
            <div class="question-text">Does your territory have genuine exclusivity?</div>
            <div class="question-context">Check Item 12 for carve-outs: online sales, mobile units, alternative channels, or "national accounts."</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>Full exclusivity with no exceptions</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>Exclusive with some carve-outs (online, national accounts)</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>No exclusive territory at all</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>I don't know / haven't checked</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="4">
            <div class="question-number">Question 5 of 10</div>
            <div class="question-text">Are you required to use specific vendors with no alternatives allowed?</div>
            <div class="question-context">Item 8 discloses required suppliers. Check if the franchisor or affiliates receive revenue from these vendors.</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>I can choose my own vendors for most things</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>Some required vendors, but I can use alternatives for others</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>All major vendors are mandatory, no alternatives</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>I don't know / haven't checked</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="5">
            <div class="question-number">Question 6 of 10</div>
            <div class="question-text">How many lawsuits or arbitration cases are disclosed in Item 3?</div>
            <div class="question-context">Focus on franchisee-initiated suits alleging fraud, misrepresentation, or failure to provide support.</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>None or routine matters only</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>1-3 franchisee lawsuits</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>4+ franchisee lawsuits or a pattern of similar claims</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>I don't know / haven't checked</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="6">
            <div class="question-number">Question 7 of 10</div>
            <div class="question-text">How long has the franchise system been operating?</div>
            <div class="question-context">Check Item 1. Newer systems may still be refining their model.</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>10+ years with 100+ locations</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>5-10 years or 50-100 locations</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>2-5 years or fewer than 50 locations</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>Under 2 years or fewer than 20 locations</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="7">
            <div class="question-number">Question 8 of 10</div>
            <div class="question-text">What happens if the franchisor terminates your agreement?</div>
            <div class="question-context">Check Item 17 for non-compete scope, cure periods, and what triggers termination.</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>Clear cure periods, reasonable non-compete (1 year, small radius)</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>Some cure periods but broad non-compete (2+ years, wide radius)</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>Immediate termination for subjective reasons, broad non-compete</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>I don't know / haven't checked</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="8">
            <div class="question-number">Question 9 of 10</div>
            <div class="question-text">How does your total investment compare to your available capital?</div>
            <div class="question-context">Use the FDD Item 7 HIGH-end estimate plus 20-30% for a realistic number.</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>Investment is less than 50% of my liquid capital</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>Investment is 50-75% of my liquid capital</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>Investment is 75-100% of my liquid capital</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>I need financing to cover the investment</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <div class="question-card" data-q="9">
            <div class="question-number">Question 10 of 10</div>
            <div class="question-text">Have you spoken with at least 5 current franchisees (not from the franchisor's reference list)?</div>
            <div class="question-context">Item 20 lists all franchisees. Pick randomly - don't rely on the franchisor's hand-picked references.</div>
            <div class="options">
                <div class="option" data-value="0" onclick="selectOption(this)"><div class="option-indicator"></div>Yes, 5+ randomly selected franchisees</div>
                <div class="option" data-value="1" onclick="selectOption(this)"><div class="option-indicator"></div>I've spoken with 2-4 franchisees</div>
                <div class="option" data-value="2" onclick="selectOption(this)"><div class="option-indicator"></div>Only franchisees the franchisor recommended</div>
                <div class="option" data-value="3" onclick="selectOption(this)"><div class="option-indicator"></div>I haven't spoken with any franchisees yet</div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="prevQuestion()">Back</button>
                <button class="btn-next" onclick="showEmailGate()">See My Results</button>
            </div>
        </div>

        <!-- EMAIL GATE -->
        <div class="email-gate" id="emailGate">
            <h2>Your results are ready.</h2>
            <p>Enter your email to see your risk score, specific red flags we identified, and what to do next.</p>
            <input type="email" id="quizEmail" placeholder="Enter your email" required>
            <button onclick="submitEmail()">Show My Risk Score</button>
            <span class="skip-link" onclick="showResults()">Skip - show results without saving</span>
            <p style="font-size:0.75rem;color:var(--gray);margin-top:8px;">No spam. Unsubscribe anytime.</p>
        </div>

        <!-- RESULTS -->
        <div class="results-card" id="resultsCard">
            <div class="score-ring" id="scoreRing">
                <div class="score-number" id="scoreNumber"></div>
                <div class="score-label" id="scoreLabel"></div>
            </div>
            <h2 class="results-title" id="resultsTitle"></h2>
            <p class="results-summary" id="resultsSummary"></p>

            <div class="flag-results" id="flagResults"></div>

            <div class="results-cta" id="resultsCta"></div>

            <div class="retake"><a onclick="location.reload()">Retake the quiz</a></div>
        </div>
    </div>

    <footer>
        <div class="footer-logo">Franchise<span>-Grade</span> Systems</div>
        <p>&copy; 2026 Franchise-Grade Systems. All rights reserved. Not legal or financial advice.</p>
        <div class="footer-links">
            <a href="/">Home</a> <a href="/tools">Free Tools</a>
            <a href="/#products">How It Works</a> <a href="/#story">Our Story</a>
            <a href="/privacy">Privacy</a> <a href="/terms">Terms</a>
        </div>
    </footer>

    <script>
    const totalQuestions = 10;
    let currentQ = 0;
    let answers = new Array(totalQuestions).fill(null);

    function selectOption(el) {
        const card = el.closest('.question-card');
        card.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
        el.classList.add('selected');
        answers[currentQ] = parseInt(el.dataset.value);
        card.querySelector('.btn-next').classList.add('enabled');
    }

    function nextQuestion() {
        if (answers[currentQ] === null) return;
        const cards = document.querySelectorAll('.question-card');
        cards[currentQ].classList.remove('active');
        currentQ++;
        if (currentQ < totalQuestions) {
            cards[currentQ].classList.add('active');
            updateProgress();
            // Restore selection if going back then forward
            if (answers[currentQ] !== null) {
                const opts = cards[currentQ].querySelectorAll('.option');
                opts.forEach(o => {
                    if (parseInt(o.dataset.value) === answers[currentQ]) o.classList.add('selected');
                });
                cards[currentQ].querySelector('.btn-next').classList.add('enabled');
            }
        }
    }

    function prevQuestion() {
        if (currentQ === 0) return;
        const cards = document.querySelectorAll('.question-card');
        cards[currentQ].classList.remove('active');
        currentQ--;
        cards[currentQ].classList.add('active');
        updateProgress();
    }

    function updateProgress() {
        const pct = ((currentQ + 1) / totalQuestions) * 100;
        document.getElementById('progressBar').style.width = pct + '%';
        document.getElementById('progressLabel').textContent = `Question ${currentQ + 1} of ${totalQuestions}`;
    }

    function showEmailGate() {
        if (answers[currentQ] === null) return;
        document.querySelectorAll('.question-card').forEach(c => c.classList.remove('active'));
        document.getElementById('emailGate').classList.add('active');
        document.getElementById('progressBar').style.width = '100%';
        document.getElementById('progressLabel').textContent = 'Complete';
    }

    function submitEmail() {
        const email = document.getElementById('quizEmail').value;
        if (!email) { showResults(); return; }

        fetch('/api/subscribe', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email: email, source: 'red-flag-quiz' })
        }).then(() => showResults()).catch(() => showResults());
    }

    function showResults() {
        document.getElementById('emailGate').classList.remove('active');

        const score = answers.reduce((sum, v) => sum + (v || 0), 0);
        const maxScore = 30;
        const pct = Math.round((score / maxScore) * 100);

        const ring = document.getElementById('scoreRing');
        const num = document.getElementById('scoreNumber');
        const label = document.getElementById('scoreLabel');
        const title = document.getElementById('resultsTitle');
        const summary = document.getElementById('resultsSummary');

        num.textContent = pct;
        label.textContent = 'Risk Score';

        let level, color;
        if (pct <= 30) {
            level = 'low'; color = 'low';
            title.textContent = 'Low Risk - Proceed with Standard Due Diligence';
            summary.textContent = 'Based on your answers, this franchise deal has relatively few obvious red flags. That does not mean it is risk-free. A thorough FDD analysis and franchisee validation calls are still essential before signing.';
        } else if (pct <= 60) {
            level = 'medium'; color = 'medium';
            title.textContent = 'Moderate Risk - Significant Concerns Detected';
            summary.textContent = 'Your answers reveal several areas that need closer examination. These are the types of issues that often look manageable during the sales process but create real problems after you sign. Do not proceed without a detailed FDD analysis.';
        } else {
            level = 'high'; color = 'high';
            title.textContent = 'High Risk - Major Red Flags Detected';
            summary.textContent = 'Your answers indicate serious structural concerns with this franchise deal. Multiple risk factors at this level often compound. Before investing any further time or money, get an objective analysis of the full FDD.';
        }

        ring.className = 'score-ring ' + color;

        // Generate specific flags
        const flagContainer = document.getElementById('flagResults');
        const flagData = [
            { q: 0, red: 3, yellow: [1,2], redMsg: 'No Item 19 financial data. You have zero official data on what franchisees earn.', yellowMsg: 'Item 19 is incomplete or you have not reviewed it. This is the most important section of the FDD.', greenMsg: 'Item 19 includes revenue and expense data. This is a good sign of transparency.' },
            { q: 1, red: 3, yellow: [1,2], redMsg: 'Uncapped fees with sole discretion. This is one of the most common ways franchisees get squeezed.', yellowMsg: 'Fee caps are unclear or you have not verified them. Check Item 6 carefully.', greenMsg: 'Technology and marketing fees are capped. This protects your margins.' },
            { q: 2, red: 3, yellow: [1,2], redMsg: 'High franchisee turnover. More than 20% churn in 3 years is a serious warning.', yellowMsg: 'Moderate turnover or unchecked. Calculate the exact number from Item 20.', greenMsg: 'Low turnover. The system is retaining franchisees.' },
            { q: 3, red: 3, yellow: [1,2], redMsg: 'No exclusive territory. You could face competition from your own franchisor.', yellowMsg: 'Territory has exceptions that could limit your market.', greenMsg: 'Full territorial exclusivity. Good.' },
            { q: 4, red: 3, yellow: [1,2], redMsg: 'Mandatory vendors with no alternatives. Your costs are locked and you cannot shop for better prices.', yellowMsg: 'Some vendor restrictions. Check if the franchisor profits from these arrangements.', greenMsg: 'Vendor flexibility. You can control your supply costs.' },
            { q: 5, red: 3, yellow: [1,2], redMsg: 'Multiple franchisee lawsuits. A pattern of litigation suggests systemic problems.', yellowMsg: 'Some litigation. Read every case summary in Item 3.', greenMsg: 'Clean litigation history.' },
            { q: 6, red: 3, yellow: [2], redMsg: 'Very new franchise system. You may be paying franchise fees to be a test case, not a proven model.', yellowMsg: 'Moderately established. Enough history to evaluate but still maturing.', greenMsg: 'Established system with track record.' },
            { q: 7, red: 3, yellow: [1,2], redMsg: 'Harsh termination terms. The franchisor can end your agreement easily and lock you out of the industry.', yellowMsg: 'Termination terms need closer review. Check cure periods and non-compete scope.', greenMsg: 'Reasonable termination protections.' },
            { q: 8, red: 3, yellow: [2], redMsg: 'You need financing to cover the investment. If the business underperforms, you are paying debt on a failing asset.', yellowMsg: 'Investment is a large portion of your capital. Limited runway if things are slow.', greenMsg: 'Strong capital position relative to investment.' },
            { q: 9, red: 3, yellow: [2], redMsg: 'No franchisee validation calls. This is the single most important step most buyers skip.', yellowMsg: 'Limited validation. Speak with at least 5 randomly selected franchisees from Item 20.', greenMsg: 'Strong validation process. You are doing this right.' },
        ];

        let html = '';
        flagData.forEach(f => {
            const ans = answers[f.q];
            if (ans === f.red) {
                html += `<div class="flag-result-item red"><strong>Red Flag</strong>${f.redMsg}</div>`;
            } else if (Array.isArray(f.yellow) ? f.yellow.includes(ans) : ans === f.yellow) {
                html += `<div class="flag-result-item yellow"><strong>Caution</strong>${f.yellowMsg}</div>`;
            } else {
                html += `<div class="flag-result-item green"><strong>Clear</strong>${f.greenMsg}</div>`;
            }
        });
        flagContainer.innerHTML = html;

        // CTA based on risk level
        const cta = document.getElementById('resultsCta');
        if (pct > 60) {
            cta.innerHTML = `
                <h3>Your deal needs a closer look.</h3>
                <p>Our AI FDD Analyzer scans all 23 items against 50+ risk patterns and gives you a detailed report with specific questions to ask. Or get the complete <a href="/decision-engine" style="color:var(--sage);font-weight:600;">Decision Engine ($297)</a> for the full due diligence toolkit.</p>
                <a href="/fdd-analyzer">Get Full FDD Analysis - $97</a>
                <a href="/sample-report" style="background:transparent;border:1px solid var(--sage);color:var(--sage);">See Sample Report</a>
                <p style="margin-top:16px;font-size:0.85rem;color:var(--slate);">Thinking of walking away from franchising? The <a href="/franchise-alternative-blueprint" style="color:var(--forest-mid);font-weight:600;">Franchise Alternative Blueprint ($497)</a> shows you how to build a systemized business independently - no royalties, no fees.</p>
            `;
        } else if (pct > 30) {
            cta.innerHTML = `
                <h3>You have some homework to do.</h3>
                <p>The areas flagged above are exactly what our AI FDD Analyzer checks. Upload your FDD and get specific answers in under 15 minutes. Or get the complete <a href="/decision-engine" style="color:var(--sage);font-weight:600;">Decision Engine ($297)</a> for the full due diligence toolkit.</p>
                <a href="/fdd-analyzer">Analyze Your FDD - $97</a>
                <a href="/red-flags-checklist" style="background:transparent;border:1px solid var(--sage);color:var(--sage);">Free Red Flags Checklist</a>
            `;
        } else {
            cta.innerHTML = `
                <h3>Looking good, but don't skip due diligence.</h3>
                <p>Low risk on this quiz does not mean risk-free. Our free tools can help you model the real economics before you sign.</p>
                <a href="/tools">Use Free Calculators</a>
                <a href="/fdd-analyzer" style="background:transparent;border:1px solid var(--sage);color:var(--sage);">Full FDD Analysis - $97</a>
            `;
        }

        document.getElementById('resultsCard').classList.add('active');
    }

    // Init
    updateProgress();
    </script>
</body>
</html>
